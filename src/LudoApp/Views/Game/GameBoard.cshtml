@model GameModel
@{
    ViewData["Title"] = "GameBoard";
}

<h2>@Model.GameName</h2>

<h2></h2>

<button id="RollBtn" onclick="RollDie()">Roll Die</button> <br />
<h3 id="RollResult">No Rolls Has been Made</h3>

    var playercount = @Model.Players.Count;

    @Model.Players.Where(player => player.TurnOrder == Model.CurrentTurn).First();

    @if (ViewBag.Player == Model.Players.Where(player => player.TurnOrder == Model.CurrentTurn).First().Name)
    {
        <script>
            document.getElementById("RollBtn").style.hidden = true;
        </script>
    }
    else
    {
        <script>
            document.getElementById("RollBtn").style.hidden = false;
        </script>
    }
    <button>Roll Die</button> <br />
    <h3 id="RollResult">No Rolls Has been Made</h3>




    @foreach (PlayerModel player in Model.Players)
    {

        <h4>@player.Name</h4>

        foreach (PieceModel piece in player.Pieces)
        {

            <h5>ID: @piece.Id , Position: @piece.Position </h5>
            <button id="@player.Name btn">@player.Name</button>
        }
    }

    @foreach (PlayerModel player in Model.Players)
    {
        if (player.TurnOrder == Model.CurrentTurn)
        {
            <script>
                document.getElementById("@player.Name btn").style.hidden = false;
            </script>
        }
        else
        {
            <script>
                document.getElementById("@player.Name btn").style.hidden = true;
            </script>
        }

    }





    <script>
    function RollDie() {
        $.ajax({
            url: "/Game/RollDie",
            type: "POST",
            data: JSON.stringify({ GameName: "@Model.GameName", PlayerName: "@ViewBag.Player"  }),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                alert(data);
            }
        });
    }
    </script>


